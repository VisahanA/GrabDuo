{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/visah/Documents/GitHub/GrabDuo/src/app/badge.ts"],"sourcesContent":["export type BadgeType =\r\n  | \"Organic\"\r\n  | \"Fresh\"\r\n  | \"Bakery\"\r\n  | \"Protein\"\r\n  | \"Ready to eat\"\r\n  | \"Snacks\"\r\n  | \"Beverages\"\r\n  | \"Traditional\"\r\n  | \"Spicy\"\r\n  | \"Sweet\"\r\n  | \"Dairy\"\r\n  | \"Grains\"\r\n  | \"Vegetables\"\r\n  | \"Fruits\"\r\n  | \"Biscuits\"\r\n  | \"Other\"\r\n  | \"Meat\"\r\n  | \"Sweets\"\r\n  | \"Cereals\";\r\n\r\nexport interface Badge {\r\n  type: BadgeType;\r\n  bgColor: string;\r\n  textColor: string;\r\n}\r\n\r\nexport const badges: Record<BadgeType, Badge> = {\r\n  Organic: {\r\n    type: \"Organic\",\r\n    bgColor: \"bg-green-100\",\r\n    textColor: \"text-green-800\",\r\n  },\r\n  Fresh: {\r\n    type: \"Fresh\",\r\n    bgColor: \"bg-blue-100\",\r\n    textColor: \"text-blue-800\",\r\n  },\r\n  Bakery: {\r\n    type: \"Bakery\",\r\n    bgColor: \"bg-orange-100\",\r\n    textColor: \"text-orange-800\",\r\n  },\r\n  Protein: {\r\n    type: \"Protein\",\r\n    bgColor: \"bg-purple-100\",\r\n    textColor: \"text-purple-800\",\r\n  },\r\n  \"Ready to eat\": {\r\n    type: \"Ready to eat\",\r\n    bgColor: \"bg-yellow-100\",\r\n    textColor: \"text-yellow-800\",\r\n  },\r\n  Snacks: {\r\n    type: \"Snacks\",\r\n    bgColor: \"bg-red-100\",\r\n    textColor: \"text-red-800\",\r\n  },\r\n  Beverages: {\r\n    type: \"Beverages\",\r\n    bgColor: \"bg-cyan-100\",\r\n    textColor: \"text-cyan-800\",\r\n  },\r\n  Traditional: {\r\n    type: \"Traditional\",\r\n    bgColor: \"bg-amber-100\",\r\n    textColor: \"text-amber-800\",\r\n  },\r\n  Spicy: {\r\n    type: \"Spicy\",\r\n    bgColor: \"bg-rose-100\",\r\n    textColor: \"text-rose-800\",\r\n  },\r\n  Sweet: {\r\n    type: \"Sweet\",\r\n    bgColor: \"bg-pink-100\",\r\n    textColor: \"text-pink-800\",\r\n  },\r\n  Dairy: {\r\n    type: \"Dairy\",\r\n    bgColor: \"bg-indigo-100\",\r\n    textColor: \"text-indigo-800\",\r\n  },\r\n  Grains: {\r\n    type: \"Grains\",\r\n    bgColor: \"bg-yellow-100\",\r\n    textColor: \"text-yellow-800\",\r\n  },\r\n  Vegetables: {\r\n    type: \"Vegetables\",\r\n    bgColor: \"bg-green-100\",\r\n    textColor: \"text-green-800\",\r\n  },\r\n  Fruits: {\r\n    type: \"Fruits\",\r\n    bgColor: \"bg-orange-100\",\r\n    textColor: \"text-orange-800\",\r\n  },\r\n  Biscuits: {\r\n    type: \"Biscuits\",\r\n    bgColor: \"bg-amber-100\",\r\n    textColor: \"text-amber-800\",\r\n  },\r\n  Other: {\r\n    type: \"Other\",\r\n    bgColor: \"bg-gray-100\",\r\n    textColor: \"text-gray-800\",\r\n  },\r\n  Meat: {\r\n    type: \"Meat\",\r\n    bgColor: \"bg-red-100\",\r\n    textColor: \"text-red-800\",\r\n  },\r\n  Sweets: {\r\n    type: \"Sweets\",\r\n    bgColor: \"bg-pink-100\",\r\n    textColor: \"text-pink-800\",\r\n  },\r\n  Cereals: {\r\n    type: \"Cereals\",\r\n    bgColor: \"bg-amber-100\",\r\n    textColor: \"text-amber-800\",\r\n  },\r\n};\r\n\r\nexport const getBadgeStyles = (badgeType: BadgeType): string => {\r\n  const badge = badges[badgeType];\r\n  return `${badge.bgColor} ${badge.textColor}`;\r\n};\r\n"],"names":[],"mappings":";;;;AA2BO,MAAM,SAAmC;IAC9C,SAAS;QACP,MAAM;QACN,SAAS;QACT,WAAW;IACb;IACA,OAAO;QACL,MAAM;QACN,SAAS;QACT,WAAW;IACb;IACA,QAAQ;QACN,MAAM;QACN,SAAS;QACT,WAAW;IACb;IACA,SAAS;QACP,MAAM;QACN,SAAS;QACT,WAAW;IACb;IACA,gBAAgB;QACd,MAAM;QACN,SAAS;QACT,WAAW;IACb;IACA,QAAQ;QACN,MAAM;QACN,SAAS;QACT,WAAW;IACb;IACA,WAAW;QACT,MAAM;QACN,SAAS;QACT,WAAW;IACb;IACA,aAAa;QACX,MAAM;QACN,SAAS;QACT,WAAW;IACb;IACA,OAAO;QACL,MAAM;QACN,SAAS;QACT,WAAW;IACb;IACA,OAAO;QACL,MAAM;QACN,SAAS;QACT,WAAW;IACb;IACA,OAAO;QACL,MAAM;QACN,SAAS;QACT,WAAW;IACb;IACA,QAAQ;QACN,MAAM;QACN,SAAS;QACT,WAAW;IACb;IACA,YAAY;QACV,MAAM;QACN,SAAS;QACT,WAAW;IACb;IACA,QAAQ;QACN,MAAM;QACN,SAAS;QACT,WAAW;IACb;IACA,UAAU;QACR,MAAM;QACN,SAAS;QACT,WAAW;IACb;IACA,OAAO;QACL,MAAM;QACN,SAAS;QACT,WAAW;IACb;IACA,MAAM;QACJ,MAAM;QACN,SAAS;QACT,WAAW;IACb;IACA,QAAQ;QACN,MAAM;QACN,SAAS;QACT,WAAW;IACb;IACA,SAAS;QACP,MAAM;QACN,SAAS;QACT,WAAW;IACb;AACF;AAEO,MAAM,iBAAiB,CAAC;IAC7B,MAAM,QAAQ,MAAM,CAAC,UAAU;IAC/B,OAAO,GAAG,MAAM,OAAO,CAAC,CAAC,EAAE,MAAM,SAAS,EAAE;AAC9C","debugId":null}},
    {"offset": {"line": 121, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/visah/Documents/GitHub/GrabDuo/src/app/cart/CartModal.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { getBadgeStyles } from \"../badge\";\r\nimport { useCart } from \"./CartContext\";\r\n\r\ninterface CartModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n}\r\n\r\nexport default function CartModal({ isOpen, onClose }: CartModalProps) {\r\n  const {\r\n    items,\r\n    totalItems,\r\n    totalPrice,\r\n    updateQuantity,\r\n    removeItem,\r\n    clearCart,\r\n  } = useCart();\r\n\r\n  const handleQuantityChange = (id: number, newQuantity: number) => {\r\n    if (newQuantity <= 0) {\r\n      removeItem(id);\r\n    } else {\r\n      updateQuantity(id, newQuantity);\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-end\">\r\n      <div className=\"bg-green-50 w-full max-w-md h-full overflow-y-auto\">\r\n        {/* Header */}\r\n        <div className=\"sticky top-0 bg-white border-b border-gray-200 p-4 shadow-sm\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <h2 className=\"text-xl font-bold text-gray-900\">\r\n              Shopping Cart\r\n            </h2>\r\n            <button\r\n              onClick={onClose}\r\n              className=\"p-2 hover:bg-gray-100 rounded-full transition-colors\"\r\n            >\r\n              <svg\r\n                className=\"w-6 h-6 text-gray-600\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                viewBox=\"0 0 24 24\"\r\n              >\r\n                <path\r\n                  strokeLinecap=\"round\"\r\n                  strokeLinejoin=\"round\"\r\n                  strokeWidth={2}\r\n                  d=\"M6 18L18 6M6 6l12 12\"\r\n                />\r\n              </svg>\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Cart Content */}\r\n        <div className=\"p-4\">\r\n          {items.length === 0 ? (\r\n            /* Empty Cart */\r\n            <div className=\"text-center py-12\">\r\n              <div className=\"text-gray-400 mb-4\">\r\n                <svg\r\n                  className=\"w-16 h-16 mx-auto mb-4\"\r\n                  fill=\"none\"\r\n                  stroke=\"currentColor\"\r\n                  viewBox=\"0 0 24 24\"\r\n                >\r\n                  <path\r\n                    strokeLinecap=\"round\"\r\n                    strokeLinejoin=\"round\"\r\n                    strokeWidth={1.5}\r\n                    d=\"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z\"\r\n                  />\r\n                </svg>\r\n              </div>\r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\r\n                Your cart is empty\r\n              </h3>\r\n              <p className=\"text-gray-600\">\r\n                Add some products to your cart to see them here.\r\n              </p>\r\n            </div>\r\n          ) : (\r\n            <div>\r\n              {/* Cart Summary */}\r\n              <div className=\"bg-white rounded-lg shadow-sm border border-gray-100 p-4 mb-4\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div>\r\n                    <h3 className=\"text-lg font-semibold text-gray-900\">\r\n                      Cart Summary\r\n                    </h3>\r\n                    <p className=\"text-gray-600 text-sm\">\r\n                      {totalItems} item{totalItems > 1 ? 's' : ''} in your cart\r\n                    </p>\r\n                  </div>\r\n                  <div className=\"text-right\">\r\n                    <p className=\"text-xl font-bold text-green-600\">\r\n                      S${totalPrice.toFixed(2)}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Cart Items */}\r\n              <div className=\"space-y-3 mb-4\">\r\n                {items.map((item) => (\r\n                  <div\r\n                    key={item.id}\r\n                    className=\"bg-white rounded-lg shadow-sm border border-gray-100 p-4\"\r\n                  >\r\n                    <div className=\"flex items-center gap-3\">\r\n                      {/* Product Visual */}\r\n                      <div\r\n                        className={`w-12 h-12 bg-gradient-to-br ${item.color} rounded-lg flex items-center justify-center flex-shrink-0`}\r\n                      >\r\n                        <div className=\"text-lg\">\r\n                          {item.icon}\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Product Details */}\r\n                      <div className=\"flex-1 min-w-0\">\r\n                        <h4 className=\"font-semibold text-gray-900 text-sm mb-1\">\r\n                          {item.name}\r\n                        </h4>\r\n                        <span\r\n                          className={`inline-block px-2 py-1 text-xs font-medium rounded-full ${getBadgeStyles(item.badge)}`}\r\n                        >\r\n                          {item.badge}\r\n                        </span>\r\n                        <p className=\"text-green-600 font-bold text-sm mt-1\">\r\n                          {item.price} each\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Controls Row */}\r\n                    <div className=\"flex items-center justify-between mt-3\">\r\n                      {/* Quantity Controls */}\r\n                      <div className=\"flex items-center gap-1 bg-gray-50 rounded-lg p-1\">\r\n                        <button\r\n                          onClick={() => handleQuantityChange(item.id, item.quantity - 1)}\r\n                          className=\"w-6 h-6 flex items-center justify-center bg-green-100 text-green-700 rounded-md hover:bg-green-200 transition-colors flex-shrink-0\"\r\n                          title=\"Decrease quantity\"\r\n                        >\r\n                          <svg\r\n                            className=\"w-2.5 h-2.5\"\r\n                            fill=\"none\"\r\n                            stroke=\"currentColor\"\r\n                            viewBox=\"0 0 24 24\"\r\n                          >\r\n                            <path\r\n                              strokeLinecap=\"round\"\r\n                              strokeLinejoin=\"round\"\r\n                              strokeWidth={3}\r\n                              d=\"M20 12H4\"\r\n                            />\r\n                          </svg>\r\n                        </button>\r\n                        <span className=\"px-2 py-1 text-gray-900 font-bold text-xs min-w-[24px] text-center flex-shrink-0\">\r\n                          {item.quantity}\r\n                        </span>\r\n                        <button\r\n                          onClick={() => handleQuantityChange(item.id, item.quantity + 1)}\r\n                          className=\"w-6 h-6 flex items-center justify-center bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors flex-shrink-0\"\r\n                          title=\"Increase quantity\"\r\n                        >\r\n                          <svg\r\n                            className=\"w-2.5 h-2.5\"\r\n                            fill=\"none\"\r\n                            stroke=\"currentColor\"\r\n                            viewBox=\"0 0 24 24\"\r\n                          >\r\n                            <path\r\n                              strokeLinecap=\"round\"\r\n                              strokeLinejoin=\"round\"\r\n                              strokeWidth={3}\r\n                              d=\"M12 4v16m8-8H4\"\r\n                            />\r\n                          </svg>\r\n                        </button>\r\n                      </div>\r\n\r\n                      {/* Remove Button */}\r\n                      <button\r\n                        onClick={() => removeItem(item.id)}\r\n                        className=\"p-1.5 text-red-500 hover:bg-red-50 rounded-md transition-colors\"\r\n                        title=\"Remove from cart\"\r\n                      >\r\n                        <svg\r\n                          className=\"w-4 h-4\"\r\n                          fill=\"none\"\r\n                          stroke=\"currentColor\"\r\n                          viewBox=\"0 0 24 24\"\r\n                        >\r\n                          <path\r\n                            strokeLinecap=\"round\"\r\n                            strokeLinejoin=\"round\"\r\n                            strokeWidth={2}\r\n                            d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1-1H8a1 1 0 00-1 1v3M4 7h16\"\r\n                          />\r\n                        </svg>\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Footer with Actions */}\r\n        {items.length > 0 && (\r\n          <div className=\"sticky bottom-0 bg-white border-t border-gray-200 p-4 shadow-lg\">\r\n            <div className=\"space-y-3\">\r\n              <button className=\"w-full bg-green-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-green-700 transition-colors\">\r\n                Proceed to Checkout\r\n              </button>\r\n              <button\r\n                onClick={clearCart}\r\n                className=\"w-full bg-red-600 text-white py-2 px-4 rounded-lg font-medium hover:bg-red-700 transition-colors\"\r\n              >\r\n                Clear Cart\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 580, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/visah/Documents/GitHub/GrabDuo/src/app/products.ts"],"sourcesContent":["import { BadgeType } from \"./badge\";\r\n\r\nexport interface Product {\r\n  id: number;\r\n  name: string;\r\n  price: string;\r\n  badge: BadgeType;\r\n  color: string;\r\n  icon: string;\r\n  // Additional fields from integrated data\r\n  brands?: string;\r\n  unitQuantity?: string;\r\n  categories?: string;\r\n  countries?: string;\r\n  imageUrl?: string;\r\n  imageSmallUrl?: string;\r\n}\r\n\r\n// Basic products for initial load (keeping only essential items)\r\nexport const products: Product[] = [\r\n  // Fruits\r\n  {\r\n    id: 1,\r\n    name: \"Fresh Mango (Alphonso)\",\r\n    price: \"S$1.30/kg\",\r\n    badge: \"Fruits\",\r\n    color: \"from-yellow-300 to-orange-400\",\r\n    icon: \"🥭\",\r\n  },\r\n  {\r\n    id: 2,\r\n    name: \"Sweet Guava\",\r\n    price: \"S$0.65/kg\",\r\n    badge: \"Fruits\",\r\n    color: \"from-green-200 to-green-400\",\r\n    icon: \"🍈\",\r\n  },\r\n  {\r\n    id: 3,\r\n    name: \"Fresh Pomegranate\",\r\n    price: \"S$1.95/kg\",\r\n    badge: \"Fruits\",\r\n    color: \"from-red-300 to-red-500\",\r\n    icon: \"🍎\",\r\n  },\r\n  {\r\n    id: 4,\r\n    name: \"Kesar Banana\",\r\n    price: \"S$0.95/dozen\",\r\n    badge: \"Fruits\",\r\n    color: \"from-yellow-200 to-yellow-400\",\r\n    icon: \"🍌\",\r\n  },\r\n  {\r\n    id: 5,\r\n    name: \"Fresh Papaya\",\r\n    price: \"S$0.50/kg\",\r\n    badge: \"Fruits\",\r\n    color: \"from-orange-200 to-orange-400\",\r\n    icon: \"🍊\",\r\n  },\r\n\r\n  // Vegetables\r\n  {\r\n    id: 6,\r\n    name: \"Lady Finger (Bhindi)\",\r\n    price: \"S$0.65/kg\",\r\n    badge: \"Vegetables\",\r\n    color: \"from-green-300 to-green-500\",\r\n    icon: \"🥒\",\r\n  },\r\n  {\r\n    id: 7,\r\n    name: \"Brinjal (Baingan)\",\r\n    price: \"S$0.55/kg\",\r\n    badge: \"Vegetables\",\r\n    color: \"from-purple-300 to-purple-500\",\r\n    icon: \"🍆\",\r\n  },\r\n  {\r\n    id: 8,\r\n    name: \"Bitter Gourd (Karela)\",\r\n    price: \"S$0.75/kg\",\r\n    badge: \"Vegetables\",\r\n    color: \"from-green-400 to-green-600\",\r\n    icon: \"🥬\",\r\n  },\r\n  {\r\n    id: 9,\r\n    name: \"Bottle Gourd (Lauki)\",\r\n    price: \"S$0.40/kg\",\r\n    badge: \"Vegetables\",\r\n    color: \"from-green-200 to-green-400\",\r\n    icon: \"🥒\",\r\n  },\r\n  {\r\n    id: 10,\r\n    name: \"Drumstick (Moringa)\",\r\n    price: \"S$0.95/kg\",\r\n    badge: \"Vegetables\",\r\n    color: \"from-green-300 to-green-500\",\r\n    icon: \"🌿\",\r\n  },\r\n\r\n  // Beverages\r\n  {\r\n    id: 11,\r\n    name: \"Coca Cola 600ml\",\r\n    price: \"S$0.65\",\r\n    badge: \"Beverages\",\r\n    color: \"from-red-400 to-red-600\",\r\n    icon: \"🥤\",\r\n  },\r\n  {\r\n    id: 12,\r\n    name: \"Pepsi 600ml\",\r\n    price: \"S$0.65\",\r\n    badge: \"Beverages\",\r\n    color: \"from-blue-400 to-blue-600\",\r\n    icon: \"🥤\",\r\n  },\r\n  {\r\n    id: 13,\r\n    name: \"Thums Up 600ml\",\r\n    price: \"S$0.65\",\r\n    badge: \"Beverages\",\r\n    color: \"from-gray-600 to-gray-800\",\r\n    icon: \"🥤\",\r\n  },\r\n  {\r\n    id: 14,\r\n    name: \"Masala Chai\",\r\n    price: \"S$0.25/cup\",\r\n    badge: \"Beverages\",\r\n    color: \"from-amber-300 to-amber-500\",\r\n    icon: \"☕\",\r\n  },\r\n  {\r\n    id: 15,\r\n    name: \"Sweet Lassi\",\r\n    price: \"S$0.50\",\r\n    badge: \"Dairy\",\r\n    color: \"from-pink-200 to-pink-400\",\r\n    icon: \"🥛\",\r\n  },\r\n\r\n  // Biscuits\r\n  {\r\n    id: 16,\r\n    name: \"Parle-G Original\",\r\n    price: \"S$0.15\",\r\n    badge: \"Biscuits\",\r\n    color: \"from-yellow-200 to-yellow-400\",\r\n    icon: \"🍪\",\r\n  },\r\n  {\r\n    id: 17,\r\n    name: \"Monaco Salted Biscuits\",\r\n    price: \"S$0.25\",\r\n    badge: \"Biscuits\",\r\n    color: \"from-orange-200 to-orange-400\",\r\n    icon: \"🍪\",\r\n  },\r\n  {\r\n    id: 18,\r\n    name: \"Good Day Cashew\",\r\n    price: \"S$0.40\",\r\n    badge: \"Biscuits\",\r\n    color: \"from-amber-200 to-amber-400\",\r\n    icon: \"🍪\",\r\n  },\r\n  {\r\n    id: 19,\r\n    name: \"Oreo Cookies\",\r\n    price: \"S$0.55\",\r\n    badge: \"Biscuits\",\r\n    color: \"from-gray-600 to-gray-800\",\r\n    icon: \"🍪\",\r\n  },\r\n  {\r\n    id: 20,\r\n    name: \"Marie Gold Biscuits\",\r\n    price: \"S$0.50\",\r\n    badge: \"Biscuits\",\r\n    color: \"from-yellow-300 to-yellow-500\",\r\n    icon: \"🍪\",\r\n  },\r\n\r\n  // Snacks\r\n  {\r\n    id: 21,\r\n    name: \"Haldiram's Namkeen\",\r\n    price: \"S$0.75\",\r\n    badge: \"Snacks\",\r\n    color: \"from-yellow-400 to-orange-500\",\r\n    icon: \"🥨\",\r\n  },\r\n  {\r\n    id: 22,\r\n    name: \"Kurkure Masala Munch\",\r\n    price: \"S$0.35\",\r\n    badge: \"Snacks\",\r\n    color: \"from-orange-400 to-red-500\",\r\n    icon: \"🌽\",\r\n  },\r\n  {\r\n    id: 23,\r\n    name: \"Lay's Classic Salted\",\r\n    price: \"S$0.45\",\r\n    badge: \"Snacks\",\r\n    color: \"from-yellow-300 to-yellow-500\",\r\n    icon: \"🥔\",\r\n  },\r\n  {\r\n    id: 24,\r\n    name: \"Britannia Good Day\",\r\n    price: \"S$0.30\",\r\n    badge: \"Biscuits\",\r\n    color: \"from-orange-200 to-orange-400\",\r\n    icon: \"🍪\",\r\n  },\r\n  {\r\n    id: 25,\r\n    name: \"Amul Fresh Milk\",\r\n    price: \"S$0.85/ltr\",\r\n    badge: \"Dairy\",\r\n    color: \"from-blue-100 to-blue-300\",\r\n    icon: \"🥛\",\r\n  },\r\n];\r\n\r\n// Async function to load all products from API\r\nlet allProductsCache: Product[] | null = null;\r\n\r\nexport async function loadAllProducts(): Promise<Product[]> {\r\n  if (allProductsCache) {\r\n    return allProductsCache;\r\n  }\r\n\r\n  try {\r\n    const response = await fetch('/api/products');\r\n    if (!response.ok) {\r\n      throw new Error('Failed to load products');\r\n    }\r\n    const loadedProducts: Product[] = await response.json();\r\n    allProductsCache = loadedProducts;\r\n    return loadedProducts;\r\n  } catch (error) {\r\n    console.error('Error loading products:', error);\r\n    // Fallback to default products if API fails\r\n    return products;\r\n  }\r\n}\r\n\r\n// Helper function to get products by category\r\nexport function getProductsByCategory(category: BadgeType, productList: Product[] = products): Product[] {\r\n  return productList.filter(product => product.badge === category);\r\n}\r\n\r\n// Enhanced confidence-based search function\r\nexport function searchProducts(query: string, productList: Product[] = products): Product[] {\r\n  if (!query.trim()) return productList;\r\n  \r\n  const keywords = query.toLowerCase().trim().split(/\\s+/).filter(keyword => keyword.length > 0);\r\n  if (keywords.length === 0) return productList;\r\n  \r\n  const scoredProducts = productList.map(product => {\r\n    let totalScore = 0;\r\n    let maxPossibleScore = 0;\r\n    \r\n    // Define field weights (importance)\r\n    const fields = [\r\n      { content: product.name.toLowerCase(), weight: 40 }, // Name is most important\r\n      { content: product.brands?.toLowerCase() || '', weight: 25 }, // Brand is second\r\n      { content: product.badge.toLowerCase(), weight: 20 }, // Category is third\r\n      { content: product.categories?.toLowerCase() || '', weight: 10 }, // Categories\r\n      { content: product.unitQuantity?.toLowerCase() || '', weight: 3 }, // Quantity\r\n      { content: product.countries?.toLowerCase() || '', weight: 2 } // Countries least important\r\n    ];\r\n    \r\n    keywords.forEach(keyword => {\r\n      let keywordScore = 0;\r\n      let keywordMaxScore = 0;\r\n      \r\n      fields.forEach(field => {\r\n        if (!field.content) return;\r\n        \r\n        keywordMaxScore += field.weight;\r\n        \r\n        // Exact match in field (highest score)\r\n        if (field.content === keyword) {\r\n          keywordScore += field.weight * 1.0;\r\n        }\r\n        // Field starts with keyword (very high score)\r\n        else if (field.content.startsWith(keyword)) {\r\n          keywordScore += field.weight * 0.9;\r\n        }\r\n        // Field contains keyword as whole word (high score)\r\n        else if (field.content.includes(` ${keyword} `) || field.content.includes(`${keyword} `) || field.content.includes(` ${keyword}`)) {\r\n          keywordScore += field.weight * 0.8;\r\n        }\r\n        // Field contains keyword as substring (medium score)\r\n        else if (field.content.includes(keyword)) {\r\n          keywordScore += field.weight * 0.6;\r\n        }\r\n        // Fuzzy match - keyword contains part of field words or vice versa (low score)\r\n        else {\r\n          const fieldWords = field.content.split(/\\s+/).filter(word => word.length > 2);\r\n          const fuzzyMatch = fieldWords.some(word => {\r\n            // Check if keyword and word share significant overlap\r\n            if (keyword.length >= 3 && word.length >= 3) {\r\n              return keyword.includes(word.slice(0, Math.min(3, word.length))) ||\r\n                     word.includes(keyword.slice(0, Math.min(3, keyword.length))) ||\r\n                     keyword.includes(word.slice(-3)) ||\r\n                     word.includes(keyword.slice(-3));\r\n            }\r\n            return false;\r\n          });\r\n          \r\n          if (fuzzyMatch) {\r\n            keywordScore += field.weight * 0.3;\r\n          }\r\n        }\r\n      });\r\n      \r\n      totalScore += keywordScore;\r\n      maxPossibleScore += keywordMaxScore;\r\n    });\r\n    \r\n    // Calculate confidence percentage\r\n    const confidence = maxPossibleScore > 0 ? (totalScore / maxPossibleScore) * 100 : 0;\r\n    \r\n    return {\r\n      product,\r\n      confidence: Math.min(confidence, 100) // Cap at 100%\r\n    };\r\n  });\r\n  \r\n  // Filter products with >50% confidence and sort by confidence descending\r\n  return scoredProducts\r\n    .filter(item => item.confidence > 50)\r\n    .sort((a, b) => b.confidence - a.confidence)\r\n    .map(item => item.product);\r\n}\r\n\r\n// Get total number of products\r\nexport const totalProducts = products.length;\r\n\r\n// Get available categories\r\nexport const availableCategories = [...new Set(products.map(p => p.badge))]; "],"names":[],"mappings":";;;;;;;;AAmBO,MAAM,WAAsB;IACjC,SAAS;IACT;QACE,IAAI;QACJ,MAAM;QACN,OAAO;QACP,OAAO;QACP,OAAO;QACP,MAAM;IACR;IACA;QACE,IAAI;QACJ,MAAM;QACN,OAAO;QACP,OAAO;QACP,OAAO;QACP,MAAM;IACR;IACA;QACE,IAAI;QACJ,MAAM;QACN,OAAO;QACP,OAAO;QACP,OAAO;QACP,MAAM;IACR;IACA;QACE,IAAI;QACJ,MAAM;QACN,OAAO;QACP,OAAO;QACP,OAAO;QACP,MAAM;IACR;IACA;QACE,IAAI;QACJ,MAAM;QACN,OAAO;QACP,OAAO;QACP,OAAO;QACP,MAAM;IACR;IAEA,aAAa;IACb;QACE,IAAI;QACJ,MAAM;QACN,OAAO;QACP,OAAO;QACP,OAAO;QACP,MAAM;IACR;IACA;QACE,IAAI;QACJ,MAAM;QACN,OAAO;QACP,OAAO;QACP,OAAO;QACP,MAAM;IACR;IACA;QACE,IAAI;QACJ,MAAM;QACN,OAAO;QACP,OAAO;QACP,OAAO;QACP,MAAM;IACR;IACA;QACE,IAAI;QACJ,MAAM;QACN,OAAO;QACP,OAAO;QACP,OAAO;QACP,MAAM;IACR;IACA;QACE,IAAI;QACJ,MAAM;QACN,OAAO;QACP,OAAO;QACP,OAAO;QACP,MAAM;IACR;IAEA,YAAY;IACZ;QACE,IAAI;QACJ,MAAM;QACN,OAAO;QACP,OAAO;QACP,OAAO;QACP,MAAM;IACR;IACA;QACE,IAAI;QACJ,MAAM;QACN,OAAO;QACP,OAAO;QACP,OAAO;QACP,MAAM;IACR;IACA;QACE,IAAI;QACJ,MAAM;QACN,OAAO;QACP,OAAO;QACP,OAAO;QACP,MAAM;IACR;IACA;QACE,IAAI;QACJ,MAAM;QACN,OAAO;QACP,OAAO;QACP,OAAO;QACP,MAAM;IACR;IACA;QACE,IAAI;QACJ,MAAM;QACN,OAAO;QACP,OAAO;QACP,OAAO;QACP,MAAM;IACR;IAEA,WAAW;IACX;QACE,IAAI;QACJ,MAAM;QACN,OAAO;QACP,OAAO;QACP,OAAO;QACP,MAAM;IACR;IACA;QACE,IAAI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","debugId":null}},
    {"offset": {"line": 907, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/visah/Documents/GitHub/GrabDuo/src/app/services/ocrService.ts"],"sourcesContent":["// OCR Service for image text extraction\r\nexport interface OCRResult {\r\n  success: boolean;\r\n  text?: string;\r\n  error?: string;\r\n  confidence?: number;\r\n  shoppingItems?: ShoppingItem[];\r\n}\r\n\r\nexport interface ShoppingItem {\r\n  id: string;\r\n  name: string;\r\n  quantity?: string;\r\n  category?: string;\r\n  words: string[];\r\n  originalText: string;\r\n}\r\n\r\nexport interface ShoppingListResponse {\r\n  success: boolean;\r\n  totalItems: number;\r\n  items: ShoppingItem[];\r\n  rawText?: string;\r\n  confidence?: number;\r\n  error?: string;\r\n}\r\n\r\nexport class OCRService {\r\n  private static readonly API_BASE_URL = 'http://localhost:8000';\r\n\r\n  /**\r\n   * Convert file to base64 string\r\n   */\r\n  private static fileToBase64(file: File): Promise<string> {\r\n    return new Promise((resolve, reject) => {\r\n      const reader = new FileReader();\r\n      reader.readAsDataURL(file);\r\n      reader.onload = () => {\r\n        if (typeof reader.result === 'string') {\r\n          // Extract base64 part (remove \"data:image/...;base64,\" prefix)\r\n          const base64 = reader.result.split(',')[1];\r\n          resolve(base64);\r\n        } else {\r\n          reject(new Error('Failed to convert file to base64'));\r\n        }\r\n      };\r\n      reader.onerror = error => reject(error);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Parse text into shopping list items using space delimiter\r\n   */\r\n  private static parseShoppingListItems(text: string): ShoppingItem[] {\r\n    if (!text || text.trim() === '') {\r\n      return [];\r\n    }\r\n\r\n    const lines = text.split('\\n').filter(line => line.trim() !== '');\r\n    const items: ShoppingItem[] = [];\r\n    let itemIndex = 1;\r\n\r\n    lines.forEach((line) => {\r\n      const trimmedLine = line.trim();\r\n      if (trimmedLine) {\r\n        // Split by space delimiter to get individual words\r\n        const words = trimmedLine.split(/\\s+/).filter(word => word.length > 0);\r\n        \r\n        // Create separate items for each word\r\n        words.forEach((word: string) => {\r\n          // Clean up the word (remove special characters if needed)\r\n          const cleanWord = word.replace(/[^\\w\\s&-]/g, '').trim();\r\n          \r\n          if (cleanWord.length > 0) {\r\n            // Check if word starts with a number (quantity)\r\n            const quantityMatch = cleanWord.match(/^(\\d+(?:\\.\\d+)?)/);\r\n            const quantity: string | undefined = quantityMatch ? quantityMatch[1] : undefined;\r\n            \r\n            // Remove quantity from name if found, ensure name is not empty\r\n            let name = quantity ? cleanWord.replace(/^\\d+(?:\\.\\d+)?/, '').trim() : cleanWord;\r\n            \r\n            // Ensure name is not empty after removing quantity\r\n            if (!name && quantity) {\r\n              name = quantity; // Use quantity as name if nothing left\r\n            }\r\n            \r\n            // Basic category detection (can be expanded)\r\n            const category: string = this.detectCategory(name.toLowerCase());\r\n\r\n            items.push({\r\n              id: `item_${itemIndex}`,\r\n              name: name,\r\n              quantity: quantity,\r\n              category: category,\r\n              words: [cleanWord], // Single word per item\r\n              originalText: word // Original word from the line\r\n            });\r\n            \r\n            itemIndex++;\r\n          }\r\n        });\r\n      }\r\n    });\r\n\r\n    return items;\r\n  }\r\n\r\n  /**\r\n   * Detect category based on item name (basic implementation)\r\n   */\r\n  private static detectCategory(itemName: string): string {\r\n    const categories: Record<string, string[]> = {\r\n      'produce': ['apple', 'banana', 'orange', 'lettuce', 'tomato', 'carrot', 'onion', 'potato'],\r\n      'dairy': ['milk', 'cheese', 'yogurt', 'butter', 'cream', 'eggs'],\r\n      'meat': ['chicken', 'beef', 'pork', 'fish', 'turkey', 'salmon'],\r\n      'pantry': ['rice', 'pasta', 'bread', 'flour', 'sugar', 'salt', 'oil'],\r\n      'beverages': ['water', 'juice', 'soda', 'coffee', 'tea', 'beer', 'wine'],\r\n      'frozen': ['ice cream', 'frozen', 'pizza'],\r\n      'household': ['soap', 'detergent', 'paper towels', 'toilet paper']\r\n    };\r\n\r\n    for (const [category, keywords] of Object.entries(categories)) {\r\n      if (keywords.some((keyword: string) => itemName.includes(keyword))) {\r\n        return category;\r\n      }\r\n    }\r\n\r\n    return 'other';\r\n  }\r\n\r\n  /**\r\n   * Extract shopping list items from image file using OCR API\r\n   */\r\n  static async extractShoppingListFromImage(imageFile: File): Promise<ShoppingListResponse> {\r\n    try {\r\n      // First extract text using existing OCR method\r\n      const ocrResult = await this.extractTextFromImage(imageFile);\r\n      \r\n      if (!ocrResult.success || !ocrResult.text) {\r\n        return {\r\n          success: false,\r\n          totalItems: 0,\r\n          items: [],\r\n          error: ocrResult.error || 'Failed to extract text from image'\r\n        };\r\n      }\r\n\r\n      // Parse extracted text into shopping list items\r\n      const items = this.parseShoppingListItems(ocrResult.text);\r\n\r\n      return {\r\n        success: true,\r\n        totalItems: items.length,\r\n        items: items,\r\n        rawText: ocrResult.text,\r\n        confidence: ocrResult.confidence\r\n      };\r\n\r\n    } catch (error) {\r\n      console.error('Shopping List OCR Error:', error);\r\n      return {\r\n        success: false,\r\n        totalItems: 0,\r\n        items: [],\r\n        error: error instanceof Error ? error.message : 'Unknown error occurred'\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Extract text from image file using OCR API\r\n   */\r\n  static async extractTextFromImage(imageFile: File): Promise<OCRResult> {\r\n    try {\r\n      // Convert image file to base64\r\n      const base64Image = await this.fileToBase64(imageFile);\r\n      \r\n      // Get the correct MIME type for the data URL\r\n      const mimeType = imageFile.type || 'image/jpeg';\r\n      \r\n      // Try the specific OCR endpoint first\r\n      try {\r\n        const response = await fetch(`${this.API_BASE_URL}/api/v1/ocr/extract-text`, {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'Accept': 'application/json',\r\n          },\r\n          body: JSON.stringify({\r\n            confidence_threshold: 0,\r\n            image_url: \"https://firebasestorage.googleapis.com/v0/b/vichu-s-blog.appspot.com/o/Image%20sample.jpg?alt=media&token=4778a5e1-9830-4f05-b5ec-ec039d575121\", // Using data URL format with correct MIME type\r\n            language: \"eng\",\r\n            preprocess_image: true\r\n          })\r\n        });\r\n\r\n        if (response.ok) {\r\n          const result = await response.json();\r\n          \r\n          // Handle different response formats\r\n          if (result.text || result.extracted_text || result.result) {\r\n            return {\r\n              success: true,\r\n              text: result.text || result.extracted_text || result.result,\r\n              confidence: result.confidence\r\n            };\r\n          }\r\n        }\r\n      } catch (err) {\r\n        console.warn('Primary OCR endpoint failed, trying fallback:', err);\r\n      }\r\n\r\n      // If primary endpoint fails, try with FormData (legacy support)\r\n      const formData = new FormData();\r\n      formData.append('file', imageFile);\r\n      \r\n      let response: Response | null = null;\r\n      \r\n      // Try fallback endpoints\r\n      const fallbackEndpoints = [\r\n        '/api/v1/ocr',\r\n        '/ocr',\r\n        '/extract-text',\r\n        '/api/ocr'\r\n      ];\r\n\r\n      for (const endpoint of fallbackEndpoints) {\r\n        try {\r\n          response = await fetch(`${this.API_BASE_URL}${endpoint}`, {\r\n            method: 'POST',\r\n            body: formData,\r\n            headers: {\r\n              'Accept': 'application/json',\r\n            },\r\n          });\r\n\r\n          if (response.ok) {\r\n            break;\r\n          }\r\n        } catch (err) {\r\n          continue;\r\n        }\r\n      }\r\n\r\n      // If all external services fail, try our test endpoint\r\n      if (!response || !response.ok) {\r\n        try {\r\n          response = await fetch('/api/test-ocr', {\r\n            method: 'POST',\r\n            body: formData,\r\n            headers: {\r\n              'Accept': 'application/json',\r\n            },\r\n          });\r\n        } catch (err) {\r\n          // Final fallback failed\r\n        }\r\n      }\r\n\r\n      if (!response || !response.ok) {\r\n        throw new Error(`OCR API request failed: ${response?.status || 'Network error'}`);\r\n      }\r\n\r\n      const result = await response.json();\r\n      \r\n      // Handle different response formats\r\n      if (result.text) {\r\n        return {\r\n          success: true,\r\n          text: result.text,\r\n          confidence: result.confidence\r\n        };\r\n      } else if (result.extracted_text) {\r\n        return {\r\n          success: true,\r\n          text: result.extracted_text,\r\n          confidence: result.confidence\r\n        };\r\n      } else if (result.result) {\r\n        return {\r\n          success: true,\r\n          text: result.result,\r\n          confidence: result.confidence\r\n        };\r\n      } else if (typeof result === 'string') {\r\n        return {\r\n          success: true,\r\n          text: result\r\n        };\r\n      }\r\n\r\n      return {\r\n        success: false,\r\n        error: 'Unknown response format from OCR API'\r\n      };\r\n\r\n    } catch (error) {\r\n      console.error('OCR Service Error:', error);\r\n      return {\r\n        success: false,\r\n        error: error instanceof Error ? error.message : 'Unknown error occurred'\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Extract text from base64 encoded image\r\n   */\r\n  static async extractTextFromBase64(base64Image: string): Promise<OCRResult> {\r\n    try {\r\n      const response = await fetch(`${this.API_BASE_URL}/api/v1/ocr`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          image: base64Image\r\n        })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`OCR API request failed: ${response.status}`);\r\n      }\r\n\r\n      const result = await response.json();\r\n      \r\n      return {\r\n        success: true,\r\n        text: result.text || result.extracted_text || result.result,\r\n        confidence: result.confidence\r\n      };\r\n\r\n    } catch (error) {\r\n      console.error('OCR Service Error:', error);\r\n      return {\r\n        success: false,\r\n        error: error instanceof Error ? error.message : 'Unknown error occurred'\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Check if OCR API is available\r\n   */\r\n  static async isAvailable(): Promise<boolean> {\r\n    try {\r\n      const response = await fetch(`${this.API_BASE_URL}/`, {\r\n        method: 'GET',\r\n        headers: {\r\n          'Accept': 'application/json',\r\n        },\r\n      });\r\n      \r\n      return response.ok;\r\n    } catch (error) {\r\n      console.error('OCR API not available:', error);\r\n      return false;\r\n    }\r\n  }\r\n} "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1254, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/visah/Documents/GitHub/GrabDuo/src/app/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport { useState, useMemo, useEffect } from \"react\";\r\nimport { getBadgeStyles } from \"./badge\";\r\nimport { useCart } from \"./cart/CartContext\";\r\nimport CartModal from \"./cart/CartModal\";\r\nimport { products, loadAllProducts, Product } from \"./products\";\r\nimport { OCRService, OCRResult } from \"./services/ocrService\";\r\n\r\nexport default function GroceryPage() {\r\n  const { addItem, totalItems, items, updateQuantity, removeItem } = useCart();\r\n  const [isCartOpen, setIsCartOpen] = useState(false);\r\n  const [isShoppingListModalOpen, setIsShoppingListModalOpen] = useState(false);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [allProducts, setAllProducts] = useState<Product[]>(products);\r\n  const [isInitialLoading, setIsInitialLoading] = useState(true);\r\n  const [isOCRProcessing, setIsOCRProcessing] = useState(false);\r\n  const itemsPerPage = 15;\r\n\r\n  // Load all products on component mount\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n    \r\n    const loadProducts = async () => {\r\n      try {\r\n        const loadedProducts = await loadAllProducts();\r\n        if (isMounted) {\r\n          setAllProducts(loadedProducts);\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to load all products:', error);\r\n        // Fallback to basic products on error\r\n        if (isMounted) {\r\n          setAllProducts(products);\r\n        }\r\n      } finally {\r\n        if (isMounted) {\r\n          setIsInitialLoading(false);\r\n        }\r\n      }\r\n    };\r\n\r\n    loadProducts();\r\n\r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, []);\r\n\r\n  // Enhanced confidence-based search function\r\n  const confidenceBasedSearch = (products: Product[], query: string): Product[] => {\r\n    if (!query.trim()) return products;\r\n    \r\n    const keywords = query.toLowerCase().trim().split(/\\s+/).filter(keyword => keyword.length > 0);\r\n    if (keywords.length === 0) return products;\r\n    \r\n    const scoredProducts = products.map(product => {\r\n      let totalScore = 0;\r\n      let maxPossibleScore = 0;\r\n      \r\n      // Define field weights (importance)\r\n      const fields = [\r\n        { content: product.name.toLowerCase(), weight: 40 }, // Name is most important\r\n        { content: product.brands?.toLowerCase() || '', weight: 25 }, // Brand is second\r\n        { content: product.badge.toLowerCase(), weight: 20 }, // Category is third\r\n        { content: product.categories?.toLowerCase() || '', weight: 10 }, // Categories\r\n        { content: product.unitQuantity?.toLowerCase() || '', weight: 3 }, // Quantity\r\n        { content: product.countries?.toLowerCase() || '', weight: 2 } // Countries least important\r\n      ];\r\n      \r\n      keywords.forEach(keyword => {\r\n        let keywordScore = 0;\r\n        let keywordMaxScore = 0;\r\n        \r\n        fields.forEach(field => {\r\n          if (!field.content) return;\r\n          \r\n          keywordMaxScore += field.weight;\r\n          \r\n          // Exact match in field (highest score)\r\n          if (field.content === keyword) {\r\n            keywordScore += field.weight * 1.0;\r\n          }\r\n          // Field starts with keyword (very high score)\r\n          else if (field.content.startsWith(keyword)) {\r\n            keywordScore += field.weight * 0.9;\r\n          }\r\n          // Field contains keyword as whole word (high score)\r\n          else if (field.content.includes(` ${keyword} `) || field.content.includes(`${keyword} `) || field.content.includes(` ${keyword}`)) {\r\n            keywordScore += field.weight * 0.8;\r\n          }\r\n          // Field contains keyword as substring (medium score)\r\n          else if (field.content.includes(keyword)) {\r\n            keywordScore += field.weight * 0.6;\r\n          }\r\n          // Fuzzy match - keyword contains part of field words or vice versa (low score)\r\n          else {\r\n            const fieldWords = field.content.split(/\\s+/).filter(word => word.length > 2);\r\n                         const fuzzyMatch = fieldWords.some(word => {\r\n               // Check if keyword and word share significant overlap\r\n               if (keyword.length >= 3 && word.length >= 3) {\r\n                 return keyword.includes(word.slice(0, Math.min(3, word.length))) ||\r\n                        word.includes(keyword.slice(0, Math.min(3, keyword.length))) ||\r\n                        keyword.includes(word.slice(-3)) ||\r\n                        word.includes(keyword.slice(-3));\r\n               }\r\n               return false;\r\n             });\r\n            \r\n            if (fuzzyMatch) {\r\n              keywordScore += field.weight * 0.3;\r\n            }\r\n          }\r\n        });\r\n        \r\n        totalScore += keywordScore;\r\n        maxPossibleScore += keywordMaxScore;\r\n      });\r\n      \r\n      // Calculate confidence percentage\r\n      const confidence = maxPossibleScore > 0 ? (totalScore / maxPossibleScore) * 100 : 0;\r\n      \r\n      return {\r\n        product,\r\n        confidence: Math.min(confidence, 100) // Cap at 100%\r\n      };\r\n    });\r\n    \r\n    // Filter products with >50% confidence and sort by confidence descending\r\n    return scoredProducts\r\n      .filter(item => item.confidence > 50)\r\n      .sort((a, b) => b.confidence - a.confidence)\r\n      .map(item => item.product);\r\n  };\r\n\r\n  // Filter products based on search query using confidence-based search\r\n  const filteredProducts = useMemo(() => {\r\n    if (!searchQuery.trim()) {\r\n      return allProducts;\r\n    }\r\n    \r\n    return confidenceBasedSearch(allProducts, searchQuery);\r\n  }, [searchQuery, allProducts]);\r\n\r\n  // Calculate pagination based on filtered products\r\n  const totalPages = Math.ceil(filteredProducts.length / itemsPerPage);\r\n  const startIndex = (currentPage - 1) * itemsPerPage;\r\n  const endIndex = startIndex + itemsPerPage;\r\n  const currentProducts = filteredProducts.slice(startIndex, endIndex);\r\n\r\n  // Reset to first page when search changes\r\n  const handleSearchChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setSearchQuery(e.target.value);\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  // Clear search\r\n  const handleClearSearch = () => {\r\n    setSearchQuery(\"\");\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  // Generate page numbers for pagination\r\n  const pageNumbers = useMemo(() => {\r\n    const pages = [];\r\n    const maxVisiblePages = 5;\r\n    \r\n    if (totalPages <= maxVisiblePages) {\r\n      for (let i = 1; i <= totalPages; i++) {\r\n        pages.push(i);\r\n      }\r\n    } else {\r\n      if (currentPage <= 3) {\r\n        for (let i = 1; i <= 5; i++) {\r\n          pages.push(i);\r\n        }\r\n      } else if (currentPage >= totalPages - 2) {\r\n        for (let i = totalPages - 4; i <= totalPages; i++) {\r\n          pages.push(i);\r\n        }\r\n      } else {\r\n        for (let i = currentPage - 2; i <= currentPage + 2; i++) {\r\n          pages.push(i);\r\n        }\r\n      }\r\n    }\r\n    return pages;\r\n  }, [currentPage, totalPages]);\r\n\r\n  const handlePageChange = (page: number) => {\r\n    setCurrentPage(page);\r\n    window.scrollTo({ top: 0, behavior: 'smooth' });\r\n  };\r\n\r\n  const handleAddToCart = (product: any) => {\r\n    addItem(product);\r\n  };\r\n\r\n  const getItemQuantity = (productId: number) => {\r\n    const cartItem = items.find((item) => item.id === productId);\r\n    return cartItem ? cartItem.quantity : 0;\r\n  };\r\n\r\n  const handleIncreaseQuantity = (product: any) => {\r\n    const currentQuantity = getItemQuantity(product.id);\r\n    if (currentQuantity === 0) {\r\n      addItem(product);\r\n    } else {\r\n      updateQuantity(product.id, currentQuantity + 1);\r\n    }\r\n  };\r\n\r\n  const handleDecreaseQuantity = (productId: number) => {\r\n    const currentQuantity = getItemQuantity(productId);\r\n    if (currentQuantity > 1) {\r\n      updateQuantity(productId, currentQuantity - 1);\r\n    } else if (currentQuantity === 1) {\r\n      removeItem(productId);\r\n    }\r\n  };\r\n\r\n  // Shopping list modal handlers\r\n  const handleSayIt = async () => {\r\n    try {\r\n      // Check if browser supports MediaRecorder\r\n      if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\r\n        alert('Audio recording is not supported in this browser.');\r\n        return;\r\n      }\r\n\r\n      // Don't set processing state yet - only during actual processing\r\n      setIsShoppingListModalOpen(false);\r\n\r\n      // Request microphone access\r\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\r\n      \r\n      // Show recording UI\r\n      const recordingToast = document.createElement('div');\r\n      recordingToast.className = 'fixed top-4 left-1/2 transform -translate-x-1/2 bg-red-600 text-white px-6 py-3 rounded-lg shadow-lg z-50 animate-slide-down';\r\n      recordingToast.innerHTML = `\r\n        <div class=\"flex items-center gap-3\">\r\n          <div class=\"flex items-center gap-2\">\r\n            <div class=\"w-3 h-3 bg-white rounded-full animate-pulse\"></div>\r\n            <span class=\"font-semibold\">Recording...</span>\r\n          </div>\r\n          <button class=\"text-white hover:text-gray-200 text-sm underline\">Click to stop</button>\r\n        </div>\r\n      `;\r\n      document.body.appendChild(recordingToast);\r\n\r\n      // Configure MediaRecorder with better audio options\r\n      const options: MediaRecorderOptions = {};\r\n      \r\n      // Try to use WAV format if supported, otherwise use best available\r\n      if (MediaRecorder.isTypeSupported('audio/wav')) {\r\n        options.mimeType = 'audio/wav';\r\n      } else if (MediaRecorder.isTypeSupported('audio/webm;codecs=opus')) {\r\n        options.mimeType = 'audio/webm;codecs=opus';\r\n      } else if (MediaRecorder.isTypeSupported('audio/webm')) {\r\n        options.mimeType = 'audio/webm';\r\n      } else if (MediaRecorder.isTypeSupported('audio/mp4')) {\r\n        options.mimeType = 'audio/mp4';\r\n      }\r\n      \r\n      console.log('🎙️ Using MediaRecorder with mimeType:', options.mimeType);\r\n      \r\n      const mediaRecorder = new MediaRecorder(stream, options);\r\n      const audioChunks: BlobPart[] = [];\r\n      let autoStopTimer: NodeJS.Timeout | null = null;\r\n\r\n      mediaRecorder.ondataavailable = (event) => {\r\n        try {\r\n          if (event.data && event.data.size > 0) {\r\n            audioChunks.push(event.data);\r\n            console.log('📼 Audio chunk received:', event.data.size, 'bytes');\r\n          }\r\n        } catch (error) {\r\n          console.warn('⚠️ Error handling audio data:', error);\r\n        }\r\n      };\r\n\r\n      mediaRecorder.onerror = (event) => {\r\n        console.error('🎙️ MediaRecorder error:', event);\r\n        stream.getTracks().forEach(track => track.stop());\r\n        if (autoStopTimer) {\r\n          clearTimeout(autoStopTimer);\r\n          autoStopTimer = null;\r\n        }\r\n        if (document.body.contains(recordingToast)) {\r\n          document.body.removeChild(recordingToast);\r\n        }\r\n        setIsOCRProcessing(false);\r\n        alert('Recording error occurred. Please try again.');\r\n      };\r\n\r\n      mediaRecorder.onstop = async () => {\r\n        stream.getTracks().forEach(track => track.stop());\r\n        \r\n        // Clear auto-stop timer\r\n        if (autoStopTimer) {\r\n          clearTimeout(autoStopTimer);\r\n          autoStopTimer = null;\r\n        }\r\n        \r\n        // Remove recording UI safely\r\n        if (document.body.contains(recordingToast)) {\r\n          document.body.removeChild(recordingToast);\r\n        }\r\n        \r\n        // Create audio blob\r\n        if (audioChunks.length === 0) {\r\n          console.warn('⚠️ No audio data recorded');\r\n          alert('No audio was recorded. Please try again.');\r\n          setIsOCRProcessing(false);\r\n          return;\r\n        }\r\n        \r\n        // Create audio blob with the actual recorded format\r\n        const audioBlob = new Blob(audioChunks, { type: mediaRecorder.mimeType || 'audio/wav' });\r\n        console.log('🎵 Created audio blob:', audioBlob.size, 'bytes, type:', audioBlob.type);\r\n        console.log('🎵 Audio chunks count:', audioChunks.length);\r\n        console.log('🎵 MediaRecorder mimeType:', mediaRecorder.mimeType);\r\n        \r\n        if (audioBlob.size === 0) {\r\n          console.warn('⚠️ Audio blob is empty');\r\n          alert('Recorded audio is empty. Please try again.');\r\n          setIsOCRProcessing(false);\r\n          return;\r\n        }\r\n        \r\n        // Show processing message directly (no separate upload step needed)\r\n        setIsOCRProcessing(true);\r\n\r\n        let processingToast: HTMLDivElement | null = null;\r\n        \r\n        try {\r\n          // Show processing toast immediately\r\n          processingToast = document.createElement('div');\r\n          processingToast.className = 'fixed top-4 left-1/2 transform -translate-x-1/2 bg-purple-600 text-white px-6 py-3 rounded-lg shadow-lg z-50 animate-slide-down';\r\n          processingToast.innerHTML = `\r\n            <div class=\"flex items-center gap-2\">\r\n              <svg class=\"w-5 h-5 animate-spin\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"></path>\r\n              </svg>\r\n              <span>Processing speech...</span>\r\n            </div>\r\n          `;\r\n          document.body.appendChild(processingToast);\r\n\r\n          console.log('🎵 Audio blob size:', audioBlob.size, 'bytes');\r\n          console.log('🎵 Audio blob type:', audioBlob.type);\r\n\r\n          // Check if STT API is available first\r\n          console.log('🔍 Checking STT API availability...');\r\n          try {\r\n            const healthCheck = await fetch('http://localhost:8000/health', {\r\n              method: 'GET',\r\n              headers: {\r\n                'Accept': 'application/json',\r\n              },\r\n            });\r\n            console.log('🔍 STT API health check:', healthCheck.status);\r\n          } catch (healthError) {\r\n            console.warn('⚠️ STT API health check failed:', healthError);\r\n          }\r\n\r\n          // Try multiple STT API approaches\r\n          let sttResponse: Response | null = null;\r\n          let sttResult: any = null;\r\n\r\n          // Approach 1: Try sending audio file directly (if supported)\r\n          try {\r\n            console.log('🗣️ Trying STT API with file upload...');\r\n            console.log('🎵 Audio blob details:', {\r\n              size: audioBlob.size,\r\n              type: audioBlob.type,\r\n              chunks: audioChunks.length\r\n            });\r\n            \r\n            const formData = new FormData();\r\n            formData.append('audio_file', audioBlob, 'recording.wav');\r\n            formData.append('confidence_threshold', '0');\r\n\r\n            console.log('📤 Sending FormData to STT API...');\r\n            sttResponse = await fetch('http://localhost:8000/api/v1/stt/transcribe', {\r\n              method: 'POST',\r\n              body: formData,\r\n            });\r\n\r\n            console.log('🗣️ STT API (file upload) response status:', sttResponse.status);\r\n            console.log('🗣️ STT API (file upload) response headers:', Object.fromEntries(sttResponse.headers.entries()));\r\n\r\n            if (sttResponse.ok) {\r\n              sttResult = await sttResponse.json();\r\n              console.log('✅ STT API (file upload) success:', sttResult);\r\n            } else {\r\n              const errorText = await sttResponse.text();\r\n              console.warn('❌ STT API (file upload) failed:', sttResponse.status, errorText);\r\n              sttResponse = null; // Reset for next attempt\r\n            }\r\n          } catch (fileUploadError) {\r\n            console.warn('❌ STT API file upload approach failed:', fileUploadError);\r\n            sttResponse = null;\r\n          }\r\n\r\n          // Approach 2: Try with base64 encoded audio (if file upload failed)\r\n          if (!sttResponse || !sttResponse.ok) {\r\n            try {\r\n              console.log('🗣️ Trying STT API with base64 audio...');\r\n              console.log('🎵 Converting audio blob to base64...');\r\n              \r\n              // Convert audio blob to base64\r\n              const audioBase64 = await new Promise<string>((resolve, reject) => {\r\n                const reader = new FileReader();\r\n                reader.onload = () => {\r\n                  try {\r\n                    const result = reader.result;\r\n                    if (typeof result === 'string' && result.includes(',')) {\r\n                      // Remove data URL prefix (e.g., \"data:audio/wav;base64,\")\r\n                      const base64 = result.split(',')[1];\r\n                      if (base64) {\r\n                        resolve(base64);\r\n                      } else {\r\n                        reject(new Error('Failed to extract base64 data from FileReader result'));\r\n                      }\r\n                    } else {\r\n                      reject(new Error('FileReader result is not a valid data URL'));\r\n                    }\r\n                  } catch (error) {\r\n                    reject(new Error(`Error processing FileReader result: ${error}`));\r\n                  }\r\n                };\r\n                reader.onerror = (error) => {\r\n                  reject(new Error(`FileReader error: ${error}`));\r\n                };\r\n                reader.onabort = () => {\r\n                  reject(new Error('FileReader operation was aborted'));\r\n                };\r\n                \r\n                try {\r\n                  reader.readAsDataURL(audioBlob);\r\n                } catch (error) {\r\n                  reject(new Error(`Failed to start FileReader: ${error}`));\r\n                }\r\n              });\r\n\r\n              console.log('✅ Base64 conversion successful, length:', audioBase64.length);\r\n              console.log('📤 Sending base64 audio to STT API...');\r\n\r\n              sttResponse = await fetch('http://localhost:8000/api/v1/stt/transcribe', {\r\n                method: 'POST',\r\n                headers: {\r\n                  'Content-Type': 'application/json',\r\n                  'Accept': 'application/json',\r\n                },\r\n                body: JSON.stringify({\r\n                  audio_data: audioBase64,\r\n                  audio_format: mediaRecorder.mimeType?.includes('webm') ? 'webm' : 'wav',\r\n                  confidence_threshold: 0\r\n                })\r\n              });\r\n\r\n              console.log('🗣️ STT API (base64) response status:', sttResponse.status);\r\n              console.log('🗣️ STT API (base64) response headers:', Object.fromEntries(sttResponse.headers.entries()));\r\n\r\n                              if (sttResponse.ok) {\r\n                  sttResult = await sttResponse.json();\r\n                  console.log('✅ STT API (base64) success:', sttResult);\r\n                } else {\r\n                  const errorText = await sttResponse.text();\r\n                  console.warn('❌ STT API (base64) failed:', sttResponse.status, errorText);\r\n                  sttResponse = null;\r\n                }\r\n            } catch (base64Error) {\r\n              console.warn('❌ STT API base64 approach failed:', base64Error);\r\n              sttResponse = null;\r\n            }\r\n          }\r\n\r\n          // Approach 3: Upload audio file and use URL (if other approaches fail)\r\n          if (!sttResponse || !sttResponse.ok) {\r\n            try {\r\n              console.log('🗣️ Trying STT API with audio upload and URL...');\r\n              \r\n              // First, upload the audio file to get a URL\r\n              const uploadFormData = new FormData();\r\n              uploadFormData.append('audio', audioBlob, 'recording.wav');\r\n              \r\n              const uploadResponse = await fetch('/api/upload-audio', {\r\n                method: 'POST',\r\n                body: uploadFormData,\r\n              });\r\n              \r\n              if (uploadResponse.ok) {\r\n                const uploadResult = await uploadResponse.json();\r\n                console.log('✅ Audio uploaded successfully:', uploadResult);\r\n                \r\n                // Now use the uploaded file URL for STT\r\n                sttResponse = await fetch('http://localhost:8000/api/v1/stt/transcribe', {\r\n                  method: 'POST',\r\n                  headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Accept': 'application/json',\r\n                  },\r\n                  body: JSON.stringify({\r\n                    audio_url: uploadResult.url,\r\n                    confidence_threshold: 0\r\n                  })\r\n                });\r\n\r\n                console.log('🗣️ STT API (upload URL) response status:', sttResponse.status);\r\n\r\n                if (sttResponse.ok) {\r\n                  sttResult = await sttResponse.json();\r\n                  console.log('✅ STT API (upload URL) success - using your recorded audio:', sttResult);\r\n                } else {\r\n                  const errorText = await sttResponse.text();\r\n                  console.warn('❌ STT API (upload URL) failed:', errorText);\r\n                }\r\n              } else {\r\n                console.warn('❌ Audio upload failed:', uploadResponse.status);\r\n              }\r\n            } catch (fallbackError) {\r\n              console.warn('❌ STT API upload approach failed:', fallbackError);\r\n            }\r\n          }\r\n\r\n          // Check final result\r\n          if (!sttResponse || !sttResponse.ok) {\r\n            let errorText = 'No response received';\r\n            try {\r\n              if (sttResponse) {\r\n                errorText = await sttResponse.text();\r\n              }\r\n            } catch (textError) {\r\n              console.warn('Could not read error response text:', textError);\r\n              errorText = `HTTP ${sttResponse?.status || 'Unknown'} error`;\r\n            }\r\n            console.error('❌ All STT API approaches failed');\r\n            throw new Error(`STT API request failed: ${sttResponse?.status || 'No response'} - ${errorText}`);\r\n          }\r\n\r\n          console.log('🗣️ Final STT API result:', sttResult);\r\n          \r\n          // Extract transcribed text\r\n          const transcribedText = sttResult?.transcribed_text || sttResult?.text || sttResult?.transcript;\r\n          \r\n          if (transcribedText) {\r\n            // Parse the transcribed text into shopping list items\r\n            const extractedItems = parseShoppingListFromText(transcribedText);\r\n            \r\n            if (extractedItems.length > 0) {\r\n              // Store the extracted items in localStorage for the wishlist page\r\n              if (typeof Storage !== 'undefined') {\r\n                localStorage.setItem('ocrShoppingItems', JSON.stringify(extractedItems));\r\n                localStorage.setItem('ocrOriginalText', transcribedText);\r\n              }\r\n              \r\n              // Remove processing toast safely\r\n              if (processingToast && document.body.contains(processingToast)) {\r\n                document.body.removeChild(processingToast);\r\n              }\r\n              \r\n              // Navigate to wishlist page immediately\r\n              if (typeof window !== 'undefined') {\r\n                window.location.href = '/wishlist?from=stt';\r\n              }\r\n            } else {\r\n              // Even if no items found, store the original text\r\n              if (typeof Storage !== 'undefined') {\r\n                localStorage.setItem('ocrOriginalText', transcribedText);\r\n              }\r\n              if (typeof window !== 'undefined') {\r\n                window.location.href = '/wishlist?from=stt';\r\n              }\r\n            }\r\n          } else {\r\n            throw new Error('No transcribed text received');\r\n          }\r\n        } catch (error) {\r\n          console.error('STT Error:', error);\r\n          \r\n          // Remove processing toast safely\r\n          if (processingToast && document.body.contains(processingToast)) {\r\n            document.body.removeChild(processingToast);\r\n          }\r\n          \r\n          const errorMessage = error instanceof Error ? error.message : 'An unknown error occurred';\r\n          alert(`Speech processing failed: ${errorMessage}\\n\\nPlease try again or use manual entry.`);\r\n        } finally {\r\n          setIsOCRProcessing(false);\r\n        }\r\n      };\r\n\r\n      // Stop recording when toast is clicked\r\n      recordingToast.onclick = () => {\r\n        try {\r\n          if (mediaRecorder && mediaRecorder.state === 'recording') {\r\n            mediaRecorder.stop();\r\n          }\r\n          if (autoStopTimer) {\r\n            clearTimeout(autoStopTimer);\r\n            autoStopTimer = null;\r\n          }\r\n        } catch (error) {\r\n          console.warn('⚠️ Error stopping recording:', error);\r\n        }\r\n      };\r\n\r\n      // Start recording with error handling\r\n      try {\r\n        mediaRecorder.start();\r\n        console.log('🎙️ Recording started');\r\n        \r\n        // Auto-stop after 10 seconds\r\n        autoStopTimer = setTimeout(() => {\r\n          try {\r\n            if (mediaRecorder && mediaRecorder.state === 'recording') {\r\n              console.log('⏰ Auto-stopping recording after 10 seconds');\r\n              mediaRecorder.stop();\r\n            }\r\n          } catch (error) {\r\n            console.warn('⚠️ Error auto-stopping recording:', error);\r\n          }\r\n        }, 10000);\r\n      } catch (error) {\r\n        console.error('❌ Failed to start recording:', error);\r\n        stream.getTracks().forEach(track => track.stop());\r\n        if (document.body.contains(recordingToast)) {\r\n          document.body.removeChild(recordingToast);\r\n        }\r\n        setIsOCRProcessing(false);\r\n        alert('Failed to start recording. Please try again.');\r\n        return;\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('❌ Error starting voice recording:', error);\r\n      \r\n      // Clean up any existing toasts\r\n      const existingToasts = document.querySelectorAll('[class*=\"fixed top-4 left-1/2\"]');\r\n      existingToasts.forEach(toast => {\r\n        try {\r\n          if (document.body.contains(toast)) {\r\n            document.body.removeChild(toast);\r\n          }\r\n        } catch (cleanupError) {\r\n          console.warn('⚠️ Error cleaning up toast:', cleanupError);\r\n        }\r\n      });\r\n      \r\n      setIsOCRProcessing(false);\r\n      \r\n      let errorMessage = 'Microphone access denied or not available';\r\n      if (error instanceof Error) {\r\n        errorMessage = error.message;\r\n      } else if (typeof error === 'string') {\r\n        errorMessage = error;\r\n      }\r\n      \r\n      console.log('🔍 Error details:', {\r\n        name: error instanceof Error ? error.name : 'Unknown',\r\n        message: errorMessage,\r\n        stack: error instanceof Error ? error.stack : undefined\r\n      });\r\n      \r\n      alert(`Voice recording failed: ${errorMessage}`);\r\n    }\r\n  };\r\n\r\n  // Enhanced helper function to parse shopping list from text (STT/OCR)\r\n  const parseShoppingListFromText = (text: string): string[] => {\r\n    console.log('🛒 Parsing shopping list from text:', text);\r\n    \r\n    const items: string[] = [];\r\n    \r\n    // Step 1: Clean the raw text first\r\n    let cleanedText = text\r\n      .replace(/^\\[|\\]$/g, '') // Remove outer brackets\r\n      .replace(/^\"(.*)\"$/g, '$1') // Remove outer quotes\r\n      .trim();\r\n    \r\n    console.log('🛒 Cleaned text:', cleanedText);\r\n    \r\n    // Step 2: Try different splitting methods\r\n    let rawItems: string[] = [];\r\n    \r\n    // Method 1: Split by newlines first\r\n    const lines = cleanedText.split('\\n').map(line => line.trim()).filter(line => line.length > 0);\r\n    \r\n    for (const line of lines) {\r\n      // Check if line contains multiple items separated by common delimiters\r\n      if (line.includes(',') || line.includes(';') || line.includes(' and ')) {\r\n        // Split by multiple delimiters\r\n        const splitItems = line.split(/[,;]|\\s+and\\s+/i)\r\n          .map(item => item.trim())\r\n          .filter(item => item.length > 0);\r\n        rawItems.push(...splitItems);\r\n      } else {\r\n        // Single item per line\r\n        rawItems.push(line);\r\n      }\r\n    }\r\n    \r\n    // Method 2: If no newlines, try splitting by common delimiters\r\n    if (rawItems.length === 0 || (rawItems.length === 1 && rawItems[0].length > 100)) {\r\n      const singleLineItems = cleanedText.split(/[,;]|\\s+and\\s+/i)\r\n        .map(item => item.trim())\r\n        .filter(item => item.length > 0);\r\n      \r\n      if (singleLineItems.length > 1) {\r\n        rawItems = singleLineItems;\r\n      } else {\r\n        rawItems = [cleanedText.trim()];\r\n      }\r\n    }\r\n    \r\n    // Method 3: If still no items or appears to be space-separated single words\r\n    if (rawItems.length === 0 || (rawItems.length === 1 && !rawItems[0].includes(',') && !rawItems[0].includes(';'))) {\r\n      // Check if it looks like space-separated items (each word could be an item)\r\n      const spaceItems = cleanedText.split(/\\s+/)\r\n        .map(item => item.trim())\r\n        .filter(item => item.length > 1);\r\n      \r\n      // If we have multiple single words, treat each as a separate item\r\n      if (spaceItems.length > 1 && spaceItems.every(item => item.length < 20)) {\r\n        rawItems = spaceItems;\r\n        console.log('🛒 Using space-separated parsing for items:', spaceItems);\r\n      }\r\n    }\r\n    \r\n    // Step 3: Clean and filter items\r\n    for (const rawItem of rawItems) {\r\n      // Remove common list markers and prefixes\r\n      let cleanItem = rawItem\r\n        .replace(/^[-*•]\\s*/, '') // Remove bullet points\r\n        .replace(/^\\d+\\.?\\s*/, '') // Remove numbers\r\n        .replace(/^(item\\s*\\d+:?\\s*)/i, '') // Remove \"item 1:\", \"item 2:\", etc.\r\n        .replace(/^(buy\\s+)/i, '') // Remove \"buy\"\r\n        .replace(/^(get\\s+)/i, '') // Remove \"get\"\r\n        .replace(/^(need\\s+)/i, '') // Remove \"need\"\r\n        .replace(/^(shopping\\s+list:?\\s*)/i, '') // Remove \"shopping list:\"\r\n        .replace(/^(grocery\\s+list:?\\s*)/i, '') // Remove \"grocery list:\"\r\n        .replace(/[\\[\\]\"',.:!?;]$/g, '') // Remove brackets, quotes, commas, and punctuation from end\r\n        .replace(/^[\\[\\]\"',.:!?;]/g, '') // Remove brackets, quotes, commas, and punctuation from start\r\n        .replace(/[\\[\\]\"',]/g, '') // Remove brackets, quotes, and commas from anywhere in the string\r\n        .replace(/\\s+/g, ' ') // Replace multiple spaces with single space\r\n        .trim();\r\n      \r\n      console.log('🛒 Cleaning item:', `\"${rawItem}\" -> \"${cleanItem}\"`);\r\n      \r\n      // Skip empty items after cleaning\r\n      if (!cleanItem) continue;\r\n      \r\n      // Filter valid items\r\n      if (cleanItem.length > 1 && cleanItem.length < 50) {\r\n        const lowerItem = cleanItem.toLowerCase();\r\n        \r\n        // Skip common non-product phrases\r\n        if (!lowerItem.includes('shopping') && \r\n            !lowerItem.includes('list') && \r\n            !lowerItem.includes('grocery') &&\r\n            !lowerItem.includes('store') &&\r\n            !lowerItem.includes('market') &&\r\n            !lowerItem.includes('buy') &&\r\n            !lowerItem.includes('need') &&\r\n            !lowerItem.includes('get') &&\r\n            !lowerItem.includes('item') &&\r\n            !lowerItem.match(/^\\d+$/) && // Just numbers\r\n            !lowerItem.match(/^[a-z]\\.$/) && // Single letters\r\n            !lowerItem.match(/^(the|and|or|but|for|with|from|to|of|in|on|at|by)$/i) // Common articles/prepositions\r\n        ) {\r\n          // Capitalize first letter for better presentation\r\n          const finalItem = cleanItem.charAt(0).toUpperCase() + cleanItem.slice(1);\r\n          items.push(finalItem);\r\n        }\r\n      }\r\n    }\r\n    \r\n    // Remove duplicates (case-insensitive)\r\n    const uniqueItems = items.filter((item, index) => \r\n      items.findIndex(i => i.toLowerCase() === item.toLowerCase()) === index\r\n    );\r\n    \r\n    console.log('🛒 Parsed items:', uniqueItems);\r\n    return uniqueItems.slice(0, 20); // Limit to 20 items\r\n  };\r\n\r\n  const handleSnapIt = async () => {\r\n    setIsShoppingListModalOpen(false);\r\n    \r\n    // Create file input element\r\n    const fileInput = document.createElement('input');\r\n    fileInput.type = 'file';\r\n    fileInput.accept = 'image/*';\r\n    fileInput.style.display = 'none';\r\n    \r\n    fileInput.onchange = async (event) => {\r\n      const file = (event.target as HTMLInputElement).files?.[0];\r\n      if (!file) return;\r\n      \r\n      // Check if file is an image\r\n      if (!file.type.startsWith('image/')) {\r\n        alert('Please select an image file');\r\n        return;\r\n      }\r\n      \r\n      // Check file size (limit to 10MB)\r\n      if (file.size > 10 * 1024 * 1024) {\r\n        alert('Image file is too large. Please select a file smaller than 10MB.');\r\n        return;\r\n      }\r\n      \r\n      setIsOCRProcessing(true);\r\n      \r\n      try {\r\n        // Check if OCR API is available\r\n        const apiAvailable = await OCRService.isAvailable();\r\n        if (!apiAvailable) {\r\n          throw new Error('OCR service is not available. Please make sure the OCR API is running on localhost:8000');\r\n        }\r\n        \r\n        // Process image with OCR\r\n        const result: OCRResult = await OCRService.extractTextFromImage(file);\r\n        \r\n        if (result.success && result.text) {\r\n          // Parse the OCR result to find product names\r\n          const extractedItems = parseShoppingListFromText(result.text);\r\n          \r\n          if (extractedItems.length > 0) {\r\n            // Store the extracted items in localStorage for the wishlist page\r\n            if (typeof Storage !== 'undefined') {\r\n              localStorage.setItem('ocrShoppingItems', JSON.stringify(extractedItems));\r\n              localStorage.setItem('ocrOriginalText', result.text);\r\n            }\r\n          } else {\r\n            // Even if no items found, store the original text\r\n            if (typeof Storage !== 'undefined') {\r\n              localStorage.setItem('ocrOriginalText', result.text);\r\n            }\r\n          }\r\n          \r\n          // Navigate to wishlist page immediately\r\n          if (typeof window !== 'undefined') {\r\n            window.location.href = '/wishlist?from=ocr';\r\n          }\r\n        } else {\r\n          throw new Error(result.error || 'Failed to extract text from image');\r\n        }\r\n      } catch (error) {\r\n        console.error('OCR Error:', error);\r\n        const errorMessage = error instanceof Error ? error.message : 'An unknown error occurred';\r\n        alert(`OCR processing failed: ${errorMessage}\\n\\nPlease try again or use manual entry.`);\r\n      } finally {\r\n        setIsOCRProcessing(false);\r\n      }\r\n    };\r\n    \r\n    // Trigger file selection\r\n    document.body.appendChild(fileInput);\r\n    fileInput.click();\r\n    document.body.removeChild(fileInput);\r\n  };\r\n\r\n  // Show loading state while products are being loaded\r\n  if (isInitialLoading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-green-50 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <svg className=\"animate-spin h-12 w-12 mx-auto mb-4 text-green-600\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n            <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" />\r\n            <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\" />\r\n          </svg>\r\n          <h2 className=\"text-xl font-semibold text-gray-900 mb-2\">Loading GrabMart</h2>\r\n          <p className=\"text-gray-600\">Preparing all products for you...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"min-h-screen bg-green-50 px-4 py-6\">\r\n        {/* Header */}\r\n        <div className=\"mb-6\">\r\n          <div className=\"flex items-center justify-between mb-2\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <h1 className=\"text-2xl font-bold text-gray-900\">GrabMart</h1>\r\n            </div>\r\n\r\n            {/* Right side icons */}\r\n            <div className=\"flex items-center gap-3\">\r\n              {/* Shopping Cart Icon with Cart Count */}\r\n              <button\r\n                onClick={() => setIsCartOpen(true)}\r\n                className=\"relative p-2 bg-white rounded-full shadow-sm hover:bg-gray-50 transition-colors\"\r\n              >\r\n                <svg\r\n                  className=\"w-6 h-6 text-gray-600\"\r\n                  fill=\"none\"\r\n                  stroke=\"currentColor\"\r\n                  viewBox=\"0 0 24 24\"\r\n                >\r\n                  <path\r\n                    strokeLinecap=\"round\"\r\n                    strokeLinejoin=\"round\"\r\n                    strokeWidth={2}\r\n                    d=\"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z\"\r\n                  />\r\n                </svg>\r\n                {totalItems > 0 && (\r\n                  <span className=\"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center\">\r\n                    {totalItems}\r\n                  </span>\r\n                )}\r\n              </button>\r\n\r\n              {/* User Icon */}\r\n              <Link\r\n                href=\"/profile\"\r\n                className=\"p-2 bg-white rounded-full shadow-sm hover:bg-gray-50 transition-colors\"\r\n              >\r\n                <svg\r\n                  className=\"w-6 h-6 text-gray-600\"\r\n                  fill=\"none\"\r\n                  stroke=\"currentColor\"\r\n                  viewBox=\"0 0 24 24\"\r\n                >\r\n                  <path\r\n                    strokeLinecap=\"round\"\r\n                    strokeLinejoin=\"round\"\r\n                    strokeWidth={2}\r\n                    d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"\r\n                  />\r\n                </svg>\r\n              </Link>\r\n            </div>\r\n          </div>\r\n          <p className=\"text-gray-600\">\r\n            Fresh groceries delivered to your door\r\n          </p>\r\n\r\n          {/* Search Bar */}\r\n          <div className=\"mt-4\">\r\n            <div className=\"relative\">\r\n              <svg\r\n                className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                viewBox=\"0 0 24 24\"\r\n              >\r\n                <path\r\n                  strokeLinecap=\"round\"\r\n                  strokeLinejoin=\"round\"\r\n                  strokeWidth={2}\r\n                  d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"\r\n                />\r\n              </svg>\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Search by name, brand, category, or keywords...\"\r\n                className=\"w-full pl-10 pr-24 py-3 bg-white border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent\"\r\n                value={searchQuery}\r\n                onChange={handleSearchChange}\r\n              />\r\n              \r\n              {/* Clear Search Button */}\r\n              {searchQuery && (\r\n                <button\r\n                  onClick={handleClearSearch}\r\n                  className=\"absolute right-20 top-1/2 transform -translate-y-1/2 p-1 hover:bg-gray-100 rounded-md transition-colors\"\r\n                  title=\"Clear search\"\r\n                >\r\n                  <svg\r\n                    className=\"w-4 h-4 text-gray-400 hover:text-gray-600\"\r\n                    fill=\"none\"\r\n                    stroke=\"currentColor\"\r\n                    viewBox=\"0 0 24 24\"\r\n                  >\r\n                    <path\r\n                      strokeLinecap=\"round\"\r\n                      strokeLinejoin=\"round\"\r\n                      strokeWidth={2}\r\n                      d=\"M6 18L18 6M6 6l12 12\"\r\n                    />\r\n                  </svg>\r\n                </button>\r\n              )}\r\n\r\n              {/* Right side icons */}\r\n              <div className=\"absolute right-3 top-1/2 transform -translate-y-1/2 flex items-center gap-2\">\r\n                {/* Shopping List Icon */}\r\n                <button\r\n                  onClick={() => setIsShoppingListModalOpen(true)}\r\n                  className=\"relative p-1 hover:bg-gray-100 rounded-md transition-colors\"\r\n                  title=\"Shopping List\"\r\n                >\r\n                  <svg\r\n                    className=\"w-5 h-5 text-gray-400 hover:text-green-500 transition-colors\"\r\n                    fill=\"none\"\r\n                    stroke=\"currentColor\"\r\n                    viewBox=\"0 0 24 24\"\r\n                  >\r\n                    <path\r\n                      strokeLinecap=\"round\"\r\n                      strokeLinejoin=\"round\"\r\n                      strokeWidth={2}\r\n                      d=\"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01\"\r\n                    />\r\n                  </svg>\r\n                </button>\r\n\r\n                {/* AI Sparkle Button */}\r\n                <button className=\"p-1 hover:bg-gray-100 rounded-md transition-colors\">\r\n                  <svg\r\n                    className=\"w-5 h-5 text-purple-500\"\r\n                    fill=\"currentColor\"\r\n                    viewBox=\"0 0 24 24\"\r\n                  >\r\n                    <path d=\"M12 0l3.09 6.91L22 10l-6.91 3.09L12 20l-3.09-6.91L2 10l6.91-3.09L12 0z\" />\r\n                    <path d=\"M19 1l1.5 3.5L24 6l-3.5 1.5L19 11l-1.5-3.5L14 6l3.5-1.5L19 1z\" />\r\n                    <path d=\"M7 4l1 2L10 7l-2 1L7 10l-1-2L4 7l2-1L7 4z\" />\r\n                  </svg>\r\n                </button>\r\n              </div>\r\n            </div>\r\n            \r\n            {/* Search Help Text */}\r\n            <div className=\"mt-2 text-xs text-gray-500\">\r\n              💡 Smart search: \"coca cola\", \"fruits\", \"nestle\", \"australia\", \"500ml\" - Only shows products with &gt;50% relevance\r\n            </div>\r\n            \r\n\r\n          </div>\r\n        </div>\r\n\r\n        {/* Product Count Info */}\r\n        <div className=\"flex justify-between items-center mb-4\">\r\n          <p className=\"text-gray-600\">\r\n            Showing {startIndex + 1}-{Math.min(endIndex, filteredProducts.length)} of {filteredProducts.length} products\r\n          </p>\r\n          <p className=\"text-sm text-gray-500\">\r\n            Page {currentPage} of {totalPages}\r\n          </p>\r\n        </div>\r\n\r\n        {/* No Results Message */}\r\n        {filteredProducts.length === 0 && searchQuery && (\r\n          <div className=\"text-center py-12\">\r\n            <div className=\"text-gray-400 mb-4\">\r\n              <svg\r\n                className=\"w-16 h-16 mx-auto mb-4\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                viewBox=\"0 0 24 24\"\r\n              >\r\n                <path\r\n                  strokeLinecap=\"round\"\r\n                  strokeLinejoin=\"round\"\r\n                  strokeWidth={1.5}\r\n                  d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"\r\n                />\r\n              </svg>\r\n            </div>\r\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\r\n              No products found\r\n            </h3>\r\n            <p className=\"text-gray-600 mb-4\">\r\n              No products with &gt;50% relevance found for \"{searchQuery}\". Try more specific or different keywords.\r\n            </p>\r\n            <p className=\"text-sm text-gray-500 mb-4\">\r\n              💡 High-confidence search: Try \"coca cola\", \"fruits\", \"nestle\", \"biscuits\", \"australia\", or \"500ml\"\r\n            </p>\r\n            <button\r\n              onClick={handleClearSearch}\r\n              className=\"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors\"\r\n            >\r\n              Clear Search\r\n            </button>\r\n          </div>\r\n        )}\r\n\r\n        {/* Product Grid - 2 columns for mobile */}\r\n        {filteredProducts.length > 0 && (\r\n          <div className=\"grid grid-cols-2 gap-3\">\r\n            {currentProducts.map((product) => (\r\n            <div\r\n              key={product.id}\r\n              className=\"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-md transition-all duration-200 flex flex-col h-full\"\r\n            >\r\n              {/* Product Visual */}\r\n              <div\r\n                className={`relative aspect-square bg-gradient-to-br ${product.color} flex items-center justify-center`}\r\n              >\r\n                {/* Text Abbreviation */}\r\n                <div className=\"text-6xl font-bold text-white\">\r\n                  {product.icon}\r\n                </div>\r\n\r\n                {/* Badge */}\r\n                <div className=\"absolute top-2 left-2\">\r\n                  <span\r\n                    className={`px-2 py-1 text-xs font-medium rounded-full ${getBadgeStyles(\r\n                      product.badge\r\n                    )}`}\r\n                  >\r\n                    {product.badge}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Product Details */}\r\n              <div className=\"p-4 flex flex-col flex-1\">\r\n                {/* Product Name */}\r\n                <h3 className=\"font-semibold text-gray-900 text-sm mb-3 line-clamp-2 flex-1\">\r\n                  {product.name}\r\n                </h3>\r\n\r\n                {/* Price */}\r\n                <div className=\"mb-4\">\r\n                  <span className=\"font-bold text-green-600 text-xl\">\r\n                    {product.price}\r\n                  </span>\r\n                </div>\r\n\r\n                {/* Add to Cart Button */}\r\n                <button\r\n                  onClick={() => handleAddToCart(product)}\r\n                  className=\"w-full bg-green-600 text-white text-sm font-medium py-3 px-3 rounded-lg hover:bg-green-700 transition-colors duration-200 active:bg-green-800 mt-auto\"\r\n                >\r\n                  Add to Cart\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n          </div>\r\n        )}\r\n\r\n        {/* Pagination */}\r\n        {totalPages > 1 && (\r\n          <div className=\"mt-8 flex flex-col items-center gap-4\">\r\n            {/* Page Info */}\r\n            <div className=\"text-sm text-gray-600\">\r\n              Page {currentPage} of {totalPages}\r\n            </div>\r\n\r\n            {/* Pagination Controls */}\r\n            <div className=\"flex items-center gap-2\">\r\n              {/* Previous Button */}\r\n              <button\r\n                onClick={() => handlePageChange(currentPage - 1)}\r\n                disabled={currentPage === 1}\r\n                className={`px-4 py-2 rounded-lg font-medium transition-colors ${\r\n                  currentPage === 1\r\n                    ? 'bg-gray-100 text-gray-400 cursor-not-allowed'\r\n                    : 'bg-white border border-gray-300 text-gray-700 hover:bg-gray-50'\r\n                }`}\r\n              >\r\n                <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\r\n                </svg>\r\n              </button>\r\n\r\n              {/* Page Numbers */}\r\n              {pageNumbers.map((page) => (\r\n                <button\r\n                  key={page}\r\n                  onClick={() => handlePageChange(page)}\r\n                  className={`px-3 py-2 rounded-lg font-medium transition-colors ${\r\n                    currentPage === page\r\n                      ? 'bg-green-600 text-white shadow-sm'\r\n                      : 'bg-white border border-gray-300 text-gray-700 hover:bg-gray-50'\r\n                  }`}\r\n                >\r\n                  {page}\r\n                </button>\r\n              ))}\r\n\r\n              {/* Next Button */}\r\n              <button\r\n                onClick={() => handlePageChange(currentPage + 1)}\r\n                disabled={currentPage === totalPages}\r\n                className={`px-4 py-2 rounded-lg font-medium transition-colors ${\r\n                  currentPage === totalPages\r\n                    ? 'bg-gray-100 text-gray-400 cursor-not-allowed'\r\n                    : 'bg-white border border-gray-300 text-gray-700 hover:bg-gray-50'\r\n                }`}\r\n              >\r\n                <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\r\n                </svg>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Cart Modal */}\r\n      <CartModal isOpen={isCartOpen} onClose={() => setIsCartOpen(false)} />\r\n\r\n      {/* Shopping List Modal */}\r\n      {isShoppingListModalOpen && (\r\n        <div \r\n          className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\"\r\n          onClick={() => setIsShoppingListModalOpen(false)}\r\n        >\r\n          <div \r\n            className=\"bg-white rounded-2xl p-8 mx-4 max-w-md w-full shadow-2xl animate-scale-up\"\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            {/* Modal Header */}\r\n            <div className=\"text-center mb-8\">\r\n              <div className=\"mb-4\">\r\n                <div className=\"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto\">\r\n                  <svg\r\n                    className=\"w-8 h-8 text-green-600\"\r\n                    fill=\"none\"\r\n                    stroke=\"currentColor\"\r\n                    viewBox=\"0 0 24 24\"\r\n                  >\r\n                    <path\r\n                      strokeLinecap=\"round\"\r\n                      strokeLinejoin=\"round\"\r\n                      strokeWidth={2}\r\n                      d=\"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01\"\r\n                    />\r\n                  </svg>\r\n                </div>\r\n              </div>\r\n              <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">Create Shopping List</h2>\r\n              <p className=\"text-gray-600\">Choose how you'd like to add items to your shopping list</p>\r\n            </div>\r\n\r\n            {/* Modal Buttons */}\r\n            <div className=\"space-y-4\">\r\n              {/* Say It Button */}\r\n              <button\r\n                onClick={handleSayIt}\r\n                disabled={isOCRProcessing}\r\n                className={`w-full rounded-xl py-4 px-6 flex items-center justify-center gap-3 transition-colors shadow-lg ${\r\n                  isOCRProcessing \r\n                    ? 'bg-gray-400 cursor-not-allowed text-white' \r\n                    : 'bg-purple-600 hover:bg-purple-700 text-white'\r\n                }`}\r\n              >\r\n                {isOCRProcessing ? (\r\n                  <>\r\n                    <svg\r\n                      className=\"w-6 h-6 animate-spin\"\r\n                      fill=\"none\"\r\n                      stroke=\"currentColor\"\r\n                      viewBox=\"0 0 24 24\"\r\n                    >\r\n                      <path\r\n                        strokeLinecap=\"round\"\r\n                        strokeLinejoin=\"round\"\r\n                        strokeWidth={2}\r\n                        d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"\r\n                      />\r\n                    </svg>\r\n                    <div className=\"text-left\">\r\n                      <div className=\"font-semibold text-lg\">Processing...</div>\r\n                      <div className=\"text-gray-100 text-sm\">Converting speech to text</div>\r\n                    </div>\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <svg\r\n                      className=\"w-6 h-6\"\r\n                      fill=\"none\"\r\n                      stroke=\"currentColor\"\r\n                      viewBox=\"0 0 24 24\"\r\n                    >\r\n                      <path\r\n                        strokeLinecap=\"round\"\r\n                        strokeLinejoin=\"round\"\r\n                        strokeWidth={2}\r\n                        d=\"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z\"\r\n                      />\r\n                    </svg>\r\n                    <div className=\"text-left\">\r\n                      <div className=\"font-semibold text-lg\">Say It</div>\r\n                      <div className=\"text-purple-100 text-sm\">Use voice to add items</div>\r\n                    </div>\r\n                  </>\r\n                )}\r\n              </button>\r\n\r\n              {/* Snap It Button */}\r\n              <button\r\n                onClick={handleSnapIt}\r\n                disabled={isOCRProcessing}\r\n                className={`w-full rounded-xl py-4 px-6 flex items-center justify-center gap-3 transition-colors shadow-lg ${\r\n                  isOCRProcessing \r\n                    ? 'bg-gray-400 cursor-not-allowed text-white' \r\n                    : 'bg-blue-600 hover:bg-blue-700 text-white'\r\n                }`}\r\n              >\r\n                <svg\r\n                  className=\"w-6 h-6\"\r\n                  fill=\"none\"\r\n                  stroke=\"currentColor\"\r\n                  viewBox=\"0 0 24 24\"\r\n                >\r\n                  <path\r\n                    strokeLinecap=\"round\"\r\n                    strokeLinejoin=\"round\"\r\n                    strokeWidth={2}\r\n                    d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\"\r\n                  />\r\n                </svg>\r\n                <div className=\"text-left\">\r\n                  <div className=\"font-semibold text-lg\">Snap It</div>\r\n                  <div className=\"text-blue-100 text-sm\">Upload image with your list</div>\r\n                </div>\r\n              </button>\r\n\r\n              {/* Manual Entry Option */}\r\n              <button\r\n                onClick={() => {\r\n                  setIsShoppingListModalOpen(false);\r\n                  if (typeof window !== 'undefined') {\r\n                    window.location.href = \"/wishlist\";\r\n                  }\r\n                }}\r\n                className=\"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl py-3 px-6 flex items-center justify-center gap-3 transition-colors\"\r\n              >\r\n                <svg\r\n                  className=\"w-5 h-5\"\r\n                  fill=\"none\"\r\n                  stroke=\"currentColor\"\r\n                  viewBox=\"0 0 24 24\"\r\n                >\r\n                  <path\r\n                    strokeLinecap=\"round\"\r\n                    strokeLinejoin=\"round\"\r\n                    strokeWidth={2}\r\n                    d=\"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z\"\r\n                  />\r\n                </svg>\r\n                <span className=\"font-medium\">Type Manually</span>\r\n              </button>\r\n            </div>\r\n\r\n            {/* Close Button */}\r\n            <button\r\n              onClick={() => setIsShoppingListModalOpen(false)}\r\n              className=\"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors\"\r\n            >\r\n              <svg\r\n                className=\"w-6 h-6\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                viewBox=\"0 0 24 24\"\r\n              >\r\n                <path\r\n                  strokeLinecap=\"round\"\r\n                  strokeLinejoin=\"round\"\r\n                  strokeWidth={2}\r\n                  d=\"M6 18L18 6M6 6l12 12\"\r\n                />\r\n              </svg>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}